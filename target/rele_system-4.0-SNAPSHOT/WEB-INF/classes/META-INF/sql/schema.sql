DROP TABLE IF EXISTS RELAY;
DROP TABLE IF EXISTS STATIV;
DROP TABLE IF EXISTS STATION;




CREATE TABLE STATION
(
    ID INT AUTO_INCREMENT PRIMARY KEY NOT NULL,
    VERSION INT DEFAULT 0 NOT NULL,
    STATION_NAME VARCHAR(10) NOT NULL
);


CREATE TABLE STATIV
(
    ID INT AUTO_INCREMENT PRIMARY KEY NOT NULL,
    VERSION INT DEFAULT 0 NOT NULL,
    NUM INT NOT NULL,
    STATION_ID INT NOT NULL,
    CONSTRAINT FK_STATION_IN_STATIV FOREIGN KEY (STATION_ID) REFERENCES STATION (ID) ON UPDATE CASCADE ON DELETE CASCADE

);



CREATE TABLE RELAY
(
    ID INT AUTO_INCREMENT NOT NULL,
    VERSION INT DEFAULT 0 NOT NULL,
    STATIV_ID INT ,
    SERIAL_NUMBER INT NOT NULL,
    TYPE_ID VARCHAR(10) NOT NULL,
    SHELVE_POSITION INT,
    SERVICE_DATE DATE,
    NEXT_SERVICE_DATE DATE,
    MANUFACTURE_DATE DATE,
    RESPONSIBLE_PERSON VARCHAR(40) NOT NULL,
    CONSTRAINT FK_STATIV_IN_RELE FOREIGN KEY (STATIV_ID) REFERENCES STATIV (ID) ON UPDATE CASCADE ON DELETE CASCADE

        , PRIMARY KEY (ID)
);

CREATE UNIQUE INDEX UQ_RELAY_1_INDEX_4 ON RELAY (SERIAL_NUMBER);









